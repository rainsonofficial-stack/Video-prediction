<!DOCTYPE html>
<html>
<head>
    <title>Luxury Illusionist</title>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital@0;1&display=swap" rel="stylesheet">
    <style>
        body { 
            margin: 0; padding: 0; 
            min-height: 100vh; 
            background: #0a0a0a; color: #d4af37; 
            font-family: 'Playfair Display', serif;
            display: flex; flex-direction: column;
            justify-content: space-between; /* Pushes footer to bottom */
        }

        /* Fixed the Header: Fills width, height adjusts to the image aspect ratio */
        .header { 
            width: 100%;
            background: linear-gradient(rgba(10,10,10,0.3), rgba(10,10,10,0.3)), url('illusion.jpg'); 
            background-size: cover; /* Fills the area */
            background-position: center;
            min-height: 200px; /* Adjust this to show more/less of your photo */
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-align: center;
        }

        h1 { font-family: 'Cinzel', serif; font-size: 2rem; margin: 0; letter-spacing: 4px; color: #fff; text-shadow: 0 2px 10px rgba(0,0,0,0.9); }
        .enquire-btn { padding: 10px 25px; border: 1px solid #d4af37; color: #d4af37; text-decoration: none; font-size: 0.75rem; letter-spacing: 2px; margin-top: 15px; background: rgba(0,0,0,0.6); }

        .content { 
            flex-grow: 1; 
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 20px 0;
        }

        .intro-text { font-style: italic; color: #888; font-size: 1.1rem; margin-bottom: 5px; }
        
        /* Card Symbol Colors */
        .symbols { font-size: 1.8rem; letter-spacing: 15px; margin-bottom: 15px; }
        .red { color: #ff3b3b; text-shadow: 0 0 10px rgba(255, 59, 59, 0.3); } 
        .black { color: #ffffff; } /* Note: Pure black symbols are invisible on black backgrounds, so we use White for Spades/Clubs */

        .video-container { position: relative; width: 90%; max-width: 600px; border: 1px solid #1a1a1a; box-shadow: 0 15px 40px rgba(0,0,0,1); }
        canvas { width: 100%; display: block; background: #000; }
        
        /* UI Overlay */
        .ui-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; transition: opacity 0.5s; opacity: 1; }
        .ui-hidden { opacity: 0; }
        #playBtn { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.7); border: 1px solid #fff; color: white; width: 70px; height: 70px; border-radius: 50%; font-size: 24px; cursor: pointer; pointer-events: auto; }
        #progress-bar { position: absolute; bottom: 20px; left: 5%; width: 90%; accent-color: #fff; pointer-events: auto; }

        .footer { 
            width: 100%; padding: 20px 0; 
            text-align: center; color: #333; 
            font-size: 0.8rem; letter-spacing: 3px; 
            text-transform: uppercase;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Luxury Illusionist</h1>
        <a href="mailto:management@rainsonofficial.com" class="enquire-btn">ENQUIRE NOW</a>
    </div>

    <div class="content">
        <div class="intro-text">I made a video for you....</div>
        <div class="symbols">
            <span class="black">♠</span> <span class="red">♥</span> <span class="black">♣</span> <span class="red">♦</span>
        </div>
        <div class="video-container">
            <canvas id="magicCanvas" width="1280" height="720"></canvas>
            <div class="ui-overlay" id="uiOverlay">
                <button id="playBtn" onclick="togglePlay(event)">&#9654;</button>
                <input type="range" id="progress-bar" min="0" max="100" value="0">
            </div>
        </div>
    </div>

    <div class="footer" id="footerText">♤rainsonofficial</div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDxPQYrMlOslsqJeHnfj2MSpROZfaAwVH0",
            authDomain: "rainson-magic.firebaseapp.com",
            projectId: "rainson-magic",
            databaseURL: "https://rainson-magic-default-rtdb.firebaseio.com",
            storageBucket: "rainson-magic.firebasestorage.app",
            messagingSenderId: "290150598500",
            appId: "1:290150598500:web:4fbe7642b2baf839609c71"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const canvas = document.getElementById('magicCanvas');
        const ctx = canvas.getContext('2d');
        const videoMap = {
            'video1': 'https://res.cloudinary.com/de76iytbx/video/upload/v1769255934/lv_0_20260124172742_nqtx0o.mp4',
            'video2': 'https://res.cloudinary.com/de76iytbx/video/upload/v1769255963/lv_0_20260124172757_wdysqo.mp4'
        };

        let activeVideo = document.createElement('video');
        activeVideo.loop = true; activeVideo.muted = false; activeVideo.playsInline = true; activeVideo.crossOrigin = "anonymous";
        let hiddenVideo = document.createElement('video');
        hiddenVideo.muted = false; hiddenVideo.playsInline = true; hiddenVideo.crossOrigin = "anonymous";

        // Firebase Listener
        db.ref('currentVideo').on('value', (snapshot) => {
            const val = snapshot.val() || 'video1';
            
            // THE INDICATOR: If connected to Firebase, it adds ".com"
            document.getElementById('footerText').innerText = "♤rainsonofficial.com";
            
            if (activeVideo.src.includes(videoMap[val])) {
                if (!activeVideo.src) activeVideo.src = videoMap[val];
                return;
            }

            const isPlaying = !activeVideo.paused;
            hiddenVideo.src = videoMap[val];
            hiddenVideo.currentTime = activeVideo.currentTime || 0;
            hiddenVideo.oncanplaythrough = () => {
                activeVideo.pause();
                activeVideo = hiddenVideo;
                if (isPlaying) activeVideo.play().catch(e => {});
                hiddenVideo = document.createElement('video');
                hiddenVideo.muted = false; hiddenVideo.playsInline = true; hiddenVideo.crossOrigin = "anonymous";
            };
        });

        function togglePlay(e) { 
            e.stopPropagation(); 
            if (activeVideo.paused) { activeVideo.play(); playBtn.innerHTML = "||"; } 
            else { activeVideo.pause(); playBtn.innerHTML = "&#9654;"; } 
        }
        
        let hideTimeout;
        function showUI() { 
            document.getElementById('uiOverlay').classList.remove('ui-hidden'); 
            clearTimeout(hideTimeout); 
            hideTimeout = setTimeout(() => { if (!activeVideo.paused) document.getElementById('uiOverlay').classList.add('ui-hidden'); }, 1500); 
        }
        canvas.addEventListener('touchstart', showUI);
        
        function render() {
            ctx.drawImage(activeVideo, 0, 0, canvas.width, canvas.height);
            if (!activeVideo.paused && activeVideo.duration) { 
                document.getElementById('progress-bar').value = (activeVideo.currentTime / activeVideo.duration) * 100; 
            }
            requestAnimationFrame(render);
        }
        render();
    </script>
</body>
</html>

